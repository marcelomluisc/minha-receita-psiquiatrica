<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minha Receita Psiquiátrica</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#008080"/>
    <script>
      if ("serviceWorker" in navigator && !/localhost/.test(window.location)) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("/service-worker.js")
            .then((registration) => { console.log("SW registered: ", registration); })
            .catch((err) => { console.log("SW registration failed: ", err); });
        });
      }
      // Tenta iniciar o download automático do APK ao abrir a página
      window.addEventListener("load", () => {
        const apkUrl = "/minha-receita-psiquiatrica.apk";
        try {
          const a = document.createElement("a");
          a.href = apkUrl;
          a.download = "minha-receita-psiquiatrica.apk";
          document.body.appendChild(a);
          a.click();
          a.remove();
        } catch (e) { console.log("Auto-download bloqueado pelo navegador.", e); }
      });
    </script>
    <style>
      body{font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'; margin:0; background:#f7f9fb;}
      header{padding:24px; text-align:center; background:white; box-shadow:0 1px 6px rgba(0,0,0,.06);}
      main{max-width:920px; margin:24px auto; padding:0 16px;}
      .card{background:white; border-radius:16px; padding:20px; box-shadow:0 4px 16px rgba(0,0,0,.08);}
      ul{padding-left:18px;}
      .download a{display:inline-block; margin-top:12px; padding:12px 16px; border-radius:12px; text-decoration:none; background:#0ea5a6; color:white;}
      .logo{height:64px; width:64px; border-radius:12px; object-fit:contain; background:#fff;}
      .row{display:flex; gap:16px; align-items:center; justify-content:center;}
    </style>
  </head>
  <body>
    <header>
      <div class="row">
        <img src="/icons/android-chrome-192x192.png" class="logo" alt="Logo"/>
        <h1>Minha Receita Psiquiátrica</h1>
      </div>
      <p>Aplicativo para solicitação de receitas e laudos médicos do Dr. Marcelo Medeiros.</p>
    </header>
    <main>
      <div class="card">
        <h2>Serviços Disponíveis</h2>
        <ul>
          <li><strong>Laudo com RQE:</strong> R$300</li>
          <li><strong>Atestado:</strong> R$85</li>
        </ul>
        <div class="download">
          <a href="/minha-receita-psiquiatrica.apk" download>Baixar APK</a>
        </div>
      </div>
    </main>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
